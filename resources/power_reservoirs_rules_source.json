{
  "solutionorder": [ "Storage" ],
  "Catchment": {
    "type": "block",
    "typecategory": "Blocks",
    "icon": {
      "filename": "rainwater-catchment.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String"
    },
    "Storage": {
      "type": "balance",
      "massbalance": "true",
      "flow": "flow",
      "inflow": "Precipitation",
      "includeinoutput": "true",
      "description": "Initial Storage",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "Precipitation": {
      "type": "source",
      "includeinoutput": "true",
      "description": "precipitation time series",
      "ask_user": "true",
      "delegate": "ComboBox;Sources"
    },
    "Area": {
      "type": "value",
      "description": "Catchment area",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "m~^2",
      "estimate": "true",
	   "criteria": "Area>0",
	  "warningmessage": "Area must be greater than zero"
    },
    "x": {
      "type": "value",
      "description": "x",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "y": {
      "type": "value",
      "description": "y",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_width": {
      "type": "value",
      "description": "_width",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_height": {
      "type": "value",
      "description": "_height",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "Slope": {
      "type": "value",
      "description": "Catchment slope in the direction of flow",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "ManningCoeff": {
      "type": "value",
      "description": "Manning's Roughness Coefficient",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "Width": {
      "type": "value",
      "description": "The width of the catchment",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    }
  },
  "Trapezoidal Channel Segment": {
    "type": "block",
    "typecategory": "Blocks",
    "icon": {
      "filename": "Trapezoidal_Channel.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String"
    },
    "Storage": {
      "type": "balance",
      "massbalance": "true",
      "flow": "flow",
      "inflow": "Precipitation",
      "includeinoutput": "true",
      "description": "Initial Storage",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "base_width": {
      "type": "value",
      "description": "Base Width",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "m",
      "estimate": "true"
    },
    "side_slope": {
      "type": "value",
      "description": "Side Slope",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "",
      "estimate": "true"
    },
    "x": {
      "type": "value",
      "description": "x",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "y": {
      "type": "value",
      "description": "y",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_width": {
      "type": "value",
      "description": "_width",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_height": {
      "type": "value",
      "description": "_height",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "ManningCoeff": {
      "type": "value",
      "description": "Manning's Roughness Coefficient",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "bottom_elevation": {
      "type": "value",
      "description": "Bottom Elevation",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "depth": {
      "type": "expression",
      "expression": "(-base_width+_sqr(base_width^2+4*side_slope*Storage/length))/(2*side_slope)",
      "description": "Water Depth",
      "ask_user": "false",
      "delegate": "UnitBox",
      "includeinoutput": "true"
    },
    "head": {
      "type": "expression",
      "expression": "depth+bottom_elevation",      
      "description": "Hydraulc Head",
      "ask_user": "false",
      "delegate": "UnitBox",
      "includeinoutput": "true"
    },
    "length": {
      "type": "value",
      "description": "Segment length",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "area": {
      "type": "expression",
      "expression": "(base_width+side_slope*depth)*depth",
      "description": "Cross-sectional area",
      "ask_user": "false",
      "delegate": "UnitBox",
      "includeinoutput": "true"
    },
    "perimeter": {
      "type": "expression",
      "expression": "(base_width+2*_sqr(1+side_slope^2)*depth)*depth",
      "description": "Wetted Perimeter",
      "ask_user": "false",
      "delegate": "UnitBox",
      "includeinoutput": "true"
    }
  },
  "Soil": {
    "type": "block",
    "typecategory": "Blocks",
    "description": "Variably Saturated Soil Block",
    "icon": {
      "filename": "Soil.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String"
    },
    "Storage": {
      "type": "balance",
      "massbalance": "true",
      "flow": "flow",
      "inflow": "Precipitation",
      "includeinoutput": "true",
      "description": "Initial Storage",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "m~^3",
	  "estimate": "true"
    },
    "Depth": {
      "type": "value",
      "description": "Depth of the soil block",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "m",
      "estimate": "true"
    },
    "theta_sat": {
      "type": "value",
      "description": "Saturated Moisture Content",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true",
	  "criteria": "theta_res<theta_sat<1",
	  "default": "0.4",
	  "warningmessage": "Saturated Moisture Content must be between 0 and 1 and larger than the residual moisture content"
    },
	"theta_res": {
      "type": "value",
      "description": "Residual Moisture Content",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true",
	  "default": "0.05",
	  "criteria": "0<theta_res<theta_sat",
	  "warningmessage": "Residual Moisture Content must be between 0 and saturated  moisture content"
    },
	"K_sat": {
      "type": "value",
      "description": "Saturated Hydraulc Conductivity",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "m/day",
      "estimate": "true",
	  "default": "1",
	  "criteria": "K_sat>0",
	  "warningmessage": "Saturated Hydraulic Conductivity must be greater than zero"
    },
	"bottom_elevation": {
      "type": "value",
      "description": "Bottom Elevation of the soil block",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
	"area": {
      "type": "value",
      "description": "Bottom Area of the soil block",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "m~^2",
      "estimate": "true",
	  "default": "1",
	  "criteria": "area>0",
	  "warningmessage": "Area must be greater than zero"
    },
	"alpha": {
      "type": "value",
      "description": "Van Genuchten's alpha parameter",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "m~^-1",
      "estimate": "true",
	  "default": "1",
	  "criteria": "alpha>0",
	  "warningmessage": "Van Genuchten's alpha must be greater than zero"
    },
	"n": {
      "type": "value",
      "description": "Van Genuchten's n parameter",
      "ask_user": "true",
      "delegate": "UnitBox",
      "unit": "",
      "estimate": "true",
	  "default": "1.41",
	  "criteria": "n>0",
	  "warningmessage": "Van Genuchten's n must be greater than zero"
    },
	"m": {
      "type": "expression",
      "expression" : "1-(1/n)",
	  "description": "Van Genuchten's m parameter",
      "ask_user": "false",
      "delegate": "UnitBox",
      "unit": ""
    },
	"theta": {
      "type": "expression",
      "expression" : "Storage/(area*Depth)",
	  "description": "Moisture Content",
      "ask_user": "false",
	  "includeinoutput": "true"
    },
	"Se": {
      "type": "expression",
      "expression" : "(theta-theta_res)/(theta_sat-theta_res)",
	  "description": "Effective Moisture content",
      "ask_user": "false",
      "delegate": "UnitBox",
      "unit": "",
	  "includeinoutput": "true"
    },
    "x": {
      "type": "value",
      "description": "x",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "y": {
      "type": "value",
      "description": "y",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_width": {
      "type": "value",
      "description": "_width",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_height": {
      "type": "value",
      "description": "_height",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "head": {
      "type": "expression",
      "expression": "Depth+bottom_elevation-(1/alpha)*(Se^(-1/m)-1)^(1/n)",
      "description": "Hydraulc Head",
      "ask_user": "false",
      "delegate": "UnitBox",
      "includeinoutput": "true"
    }
  },
  "soil_to_soil_link": {
    "type": "link",
    "typecategory": "Connectors",
    "icon": {
      "filename": "Soil2Soil.png"
    },
    "description": "Soil to soil connector",
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "area": {
      "type": "expression",
      "description": "Cross-sectional area",
      "expression": "(area.s+area.e)/2",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "length": {
      "type": "expression",
      "description": "lenght",
      "expression": "(Depth.s+Depth.e)/2",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "Se": {
      "type": "expression",
      "description": "Effective Saturation",
      "expression": "_min(_max(Se.s;Se.e);0.999)",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "m": {
      "type": "expression",
      "description": "Effective Saturation",
      "expression": "0.5*(m.s+m.e)",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "K_sat": {
      "type": "expression",
      "description": "Saturated Hydraulic Conductivity",
      "expression": "0.5*(K_sat.s+K_sat.e)",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "K_eff": {
      "type": "expression",
      "description": "Effective Hydraulic Conductivity",
      "expression": "K_sat*(1-(1-Se^(1/m))^m)^2",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "flow": {
      "type": "expression",
      "expression": "(head.s-head.e)*K_eff/length*area",
      "includeinoutput": "true",
      "applylimit": "true",
      "ask_user": "false"
    }
  },
  "Trapezoidal_Channel_link": {
    "type": "link",
    "typecategory": "Connectors",
    "icon": {
      "filename": "Trapezoidal_Channel_Link.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "area": {
      "type": "expression",
      "description": "Cross-sectional area",
      "expression": "(area.s+area.e)/2",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "perimeter": {
      "type": "expression",
      "description": "Wetted Perimeter",
      "expression": "(perimeter.s+perimeter.e)/2",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "hydraulic_radious": {
      "type": "expression",
      "description": "Hydraulic Radius",
      "expression": "area/perimeter",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "ManningCoeff": {
      "type": "expression",
      "description": "Manning's roughness coefficient",
      "expression": "(ManningCoeff.s+ManningCoeff.e)/2",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "length": {
      "type": "expression",
      "description": "Connector length",
      "expression": "(length.s+length.e)/2",
      "includeinoutput": "true",
      "ask_user": "false"
    },
    "flow": {
      "type": "expression",
      "expression": "(_sqr((head.s-head.e)/length)/ManningCoeff)*area*hydraulic_radious^0.6667",
      "includeinoutput": "true",
      "applylimit": "true",
      "ask_user": "false"
    }
  },
  "Precipitation": {
    "type": "source",
    "typecategory": "Sources",
    "icon": {
      "filename": "cloud.png"
    },
    "name": {
      "description": "Name",      
      "type": "string",
      "ask_user": "true",
      "delegate": "String"
    },
    "coefficient": {
      "type": "expression",
      "expression": "Area",
      "ask_user": "false",
      "delegate": "UnitBox"
    },
    "timeseries": {
      "type": "timeseries_prec",
      "includeinoutput": "true",
      "description": "Predcipitation intensity",
      "ask_user": "true",
      "delegate": "Browser;time series"
    }
  },
  "Reservoir": {
    "type": "block",
    "typecategory": "Blocks",
    "icon": {
      "filename": "Reservoir_Rating_Curve.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String"
    },
    "x": {
      "type": "value",
      "description": "x",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "y": {
      "type": "value",
      "description": "y",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_width": {
      "type": "value",
      "description": "_width",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_height": {
      "type": "value",
      "description": "_height",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "Storage": {
      "type": "balance",
      "massbalance": "true",
      "flow": "flow",
      "inflow": "inflow",
      "includeinoutput": "true",
      "description": "Initial Storage",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "reservoir_power": {
      "type": "value",
      "default": "2",
      "description": "Reservoir rating curve power",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "reservoir_coeff": {
      "type": "value",
      "default": "10",
      "description": "Reservoir rating curve coefficient",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "inflow": {
      "type": "timeseries",
      "includeinoutput": "true",
      "applylimit": "true",
      "description": "Flow rate time series",
      "ask_user": "true",
      "delegate": "Browser"
    }
  },
  "Special_Reservoir": {
    "type": "block",
    "typecategory": "Blocks",
    "icon": {
      "filename": "Reservoid_Control.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String"
    },
    "x": {
      "type": "value",
      "description": "x",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "y": {
      "type": "value",
      "description": "y",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_width": {
      "type": "value",
      "description": "_width",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_height": {
      "type": "value",
      "description": "_height",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "Storage": {
      "type": "balance",
      "massbalance": "true",
      "flow": "flow",
      "inflow": "inflow",
      "includeinoutput": "true",
      "description": "Initial Storage",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "reservoir_power": {
      "type": "value",
      "default": "2",
      "description": "Reservoir rating curve power",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "reservoir_coeff": {
      "type": "value",
      "default": "10",
      "description": "Reservoir rating curve coefficient",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    },
    "inflow": {
      "type": "timeseries",
      "includeinoutput": "true",
      "applylimit": "true",
      "description": "Flow rate time series",
      "ask_user": "true",
      "delegate": "Browser"
    }
  },
  "Reservoir_link": {
    "type": "link",
    "typecategory": "Connectors",
    "icon": {
      "filename": "Reservoir_Link_Arrow.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "flow": {
      "type": "expression",
      "expression": "reservoir_coeff.s*Storage.s^reservoir_power.s",
      "includeinoutput": "true",
      "applylimit": "true",
      "ask_user": "false",
      "delegate": "Browser" 
    }
  },
  "Catchment_link": {
    "type": "link",
    "typecategory": "Connectors",
    "icon": {
      "filename": "reservoir_link.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "flow": {
      "type": "expression",
      "expression": "(Width.s/ManningCoeff.s)*(Slope.s^0.5)*(Storage.s/Area.s^(1.666667))*86400",
      "includeinoutput": "true",
      "applylimit": "true",
      "ask_user": "false",
      "delegate": "TimeSeries" 
    }
  },
  "Reservoir_link_rule": {
    "type": "link",
    "typecategory": "Connectors",
    "icon": {
      "filename": "reservoir_link.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "flow": {
      "type": "rule",
      "rule": {
        "Storage.s<S_min": "Q_min",
        "S_min<Storage.s<S_max": "Q_min+((Storage.s-S_min)/(S_max-S_min))*(Q_max-Q_min)",
        "Storage.s>S_max": "Q_max"
      },
      "includeinoutput": "true",
      "applylimit": "true",
      "ask_user": "false"
    },
    "Q_min": {
      "type": "value",
      "default": "10",
      "description": "Minimum flow",
      "ask_user": "true",
      "estimate": "true"
    },
    "Q_max": {
      "type": "value",
      "default": "100",
      "description": "Maximum flow",
      "ask_user": "true",
      "estimate": "true"
    },
    "S_min": {
      "type": "value",
      "default": "10",
      "description": "Minimum storage",
      "ask_user": "true",
      "estimate": "true"
    },
    "S_max": {
      "type": "value",
      "default": "100",
      "description": "Maximum storage",
      "ask_user": "true",
      "estimate": "true"
    }
  },
  "User": {
    "type": "block",
    "typecategory": "Blocks",
    "icon": {
      "filename": "farm.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String"
    },
    "x": {
      "type": "value",
      "description": "x",
	  "default": "900",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "y": {
      "type": "value",
      "description": "y",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_width": {
      "type": "value",
      "description": "_width",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "_height": {
      "type": "value",
      "description": "_height",
	  "default": "200",
      "ask_user": "true",
      "delegate": "UnitBox"
    },
    "Storage": {
      "type": "balance",
      "massbalance": "true",
      "flow": "flow",
      "includeinoutput": "true",
      "description": "Initial Storage",
      "ask_user": "true",
      "delegate": "UnitBox",
      "estimate": "true"
    }
  },
  "User_flow": {
    "type": "link",
    "typecategory": "Connectors",
    "icon": {
      "filename": "farm_link.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "flow": {
      "type": "timeseries",
      "includeinoutput": "true",
      "applylimit": "true",
      "description": "Flow rate time series",
      "ask_user": "true",
      "delegate": "Browser" 
    }
  },
  "Parameter": {
    "type": "parameter",
    "typecategory": "Parameters",
    "icon": {
      "filename": "parameter.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "low": {
      "type": "value",
      "includeinoutput": "true",
      "description": "Lower Limit",
      "ask_user": "true",
      "delegate": "UnitBox" 
    },
    "high": {
      "type": "value",
      "includeinoutput": "true",
      "description": "Upper Limit",
      "ask_user": "true",
      "delegate": "UnitBox" 
    },
    "value": {
      "type": "value",
      "includeinoutput": "true",
      "description": "Value",
      "ask_user": "true",
      "delegate": "UnitBox" 
    }
  },
  "Objective_Function": {
    "type": "objective_function",
    "typecategory": "Objective Functions",
    "icon": {
      "filename": "objective.png"
    },
    "name": {
      "description": "Name",
      "type": "string",
      "ask_user": "true",
      "delegate": "String" 
    },
    "object": {
      "delegate": "ComboBox;BlockLinks",
      "type": "string",
      "includeinoutput": "true",
      "description": "Object",
      "ask_user": "true"
    },
    "method": {
      "type": "string",
      "delegate": "ComboBox;items:integrate,value,maximum,variance",
      "includeinoutput": "true",
      "description": "Calculation method",
      "ask_user": "true"
    },
    "expression": {
      "delegate": "expressionEditor",
      "type": "expression",
      "includeinoutput": "true",
      "description": "Expression",
      "ask_user": "true"
    },
    "weight": {
      "type": "value",
      "includeinoutput": "false",
      "description": "Weight",
      "ask_user": "true",
      "delegate": "UnitBox" 
    }
  }
}
